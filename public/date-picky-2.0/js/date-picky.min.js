/**
 * date-picky
 * @author Samip Shrestha <javasamip@gmaill.com>
 * To support the developer please dont delete this comment section
 */
!function(e){"use strict";var a=new Date,t=a.getFullYear(),i=a.getMonth(),r=a.getDate(),s=["Su","Mo","Tu","We","Th","Fr","Sa"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e,a){return new Date(a,e,0).getDate()},c={setTable:function(a,t,i){var r=e("<table/>",{"class":"datePicker-calendar"}),s=e("<div/>",{"class":"table-overlay"});return a=c.setHeading(a,t,i),a.append(r),i.disableClickEvent&&r.append(s),r=c.setDays(r,i.setWeekHoliday,i.holiday),r=c.setDates(r,t,i),i.singleCalendarMode||i.showCurrentDateButton&&(a=c.setFooter(a,t,i)),a},formatDate:function(e){return e>=1&&9>=e&&(e="0"+e),e},formattedDate:function(e,a,t,i){return e+i+a+i+t},getDateFormat:function(a,t){var i,r=e(a).attr("date-value").split("-");return"DD/MM/YYYY"==t.format?i=c.formattedDate(r[2],r[1],r[0],"/"):"MM/DD/YYYY"==t.format?i=c.formattedDate(r[1],r[2],r[0],"/"):"DD-MM-YYYY"==t.format?i=c.formattedDate(r[2],r[1],r[0],"-"):"mm-dd-yy"==t.format?i=c.formattedDate(r[1],r[2],r[0],"-"):"YYYY-MM-DD"==t.format?i=c.formattedDate(r[0],r[1],r[2],"-"):"D MMM, YYYY"==t.format?i=r[2]+" "+l[parseInt(r[1])-1]+", "+r[0]:"D MMMM, YYYY"==t.format?i=r[2]+" "+n[parseInt(r[1])-1]+", "+r[0]:jQuery.error("The defined date format is not supported "+t.format+" ."),i},setValue:function(a,t,i){var r=c.getDateFormat(t,i);i.multipleDate?""!==e(a).val()?e(a).val(e(a).val()+", "+r):e(a).val(r):(e(a).val(r),d.removeDatePicker(a)),i.callback?(e(t).hasClass("active")&&i.callback.call(this,e(t).attr("date-value")),i.preDatesOnlyClickable||e(t).toggleClass("active")):e(t).toggleClass("active")},setHeading:function(a,r,s){var l=e("<div/>",{"class":"calendar-heading"}),o=e("<div/>",{"class":"month-title"}),d=e("<div/>",{"class":"next",title:"Next Month"}),f=e("<div/>",{"class":"prev",title:"Previous Month"});return o.text(n[i]+" "+t),s.singleCalendarMode?l.append(o):(l.append(f),l.append(o),l.append(d),o.css({width:"calc(100% - 40px)","float":"left"})),d.click(function(e){a.empty(),i>=11?(i=0,t+=1):i+=1,a=c.setTable(a,r,s)}),f.click(function(){a.empty(),0>=i?(i=11,t-=1):i-=1,a=c.setTable(a,r,s)}),a.append(l)},setFooter:function(s,n,l){var o=e("<div/>",{"class":"footer-wrapper"});return o.text("Go to current date"),o.on("click",function(){s.empty(),t=a.getFullYear(),i=a.getMonth(),r=a.getDate(),s=c.setTable(s,n,l)}),s.append(o)},checkForMinDate:function(e,a,t,i,r){return a<r[2]?e.addClass("disabled"):a==r[2]&&(t<r[1]?e.addClass("disabled"):t==r[1]&&i<r[0]&&e.addClass("disabled")),e},checkForMaxDate:function(e,a,t,i,r){return a>r[2]?e.addClass("disabled"):a==r[2]&&(t>r[1]?e.addClass("disabled"):t==r[1]&&i>r[0]&&e.addClass("disabled")),e},checkForPreDates:function(e,a,t,i,r,s){for(var n=0;n<r.length;n++)r[n][0]==a&&r[n][1]==t&&r[n][2]==i&&(s||e.addClass("disabled"),e.addClass("active"));return e},setDates:function(a,s,n){var l,d,f=[];if(n.minDate&&(l=n.minDate.split("/")),n.maxDate&&(d=n.maxDate.split("/")),n.preDates)for(u=0;u<n.preDates.length;u++)f[u]=n.preDates[u].split("-");for(var u=1;u<=o(i+1,t);u){for(var D=e("<tr/>",{"class":"row-"+u}),p=new Date(t,i,1).getDay(),v=1;7>=v;v++,u++){var m=e("<td/>",{"class":"curr-month-date"});if(1==u){var h=o(i,t),k=i,g=t;0>=i&&(k=12,g=t-1);for(var C=p-1;C>=0;C--){var b=e("<td/>",{"class":"prev-month-date"});n.minDate&&(b=c.checkForMinDate(b,g,k,parseInt(h)-C,l)),n.maxDate&&(b=c.checkForMaxDate(b,g,k,parseInt(h)-C,d)),n.preDates&&(b=c.checkForPreDates(b,g,k,parseInt(h)-C,f,n.preDatesClickable)),b.attr("date-value",g+"-"+c.formatDate(k)+"-"+c.formatDate(parseInt(h)-C)),b.text(h-C),D.append(b),v++,b.on("click",function(a){e(a.target).hasClass("disabled")||c.setValue(s,this,n)})}}else if(u>o(i+1,t)){var M=1,y=i+2,Y=t;i>=11&&(y=1,Y=t+1);for(var C=D.children().length;7>C;C++,M++){var x=e("<td/>",{"class":"next-month-date"});n.minDate&&(x=c.checkForMinDate(x,Y,y,M,l)),n.maxDate&&(x=c.checkForMaxDate(x,Y,y,M,d)),n.preDates&&(x=c.checkForPreDates(x,Y,y,M,f,n.preDatesClickable)),x.attr("date-value",Y+"-"+c.formatDate(y)+"-"+c.formatDate(M)),x.text(M),D.append(x),v++,x.on("click",function(a){e(a.target).hasClass("disabled")||c.setValue(s,this,n)})}break}if(n.showCurrentDate&&u==r){var F=new Date;i==F.getMonth()&&t==F.getFullYear()&&m.addClass("today")}7==v&&"saturday"==n.holiday.toLowerCase()?n.setWeekHoliday&&m.addClass("red"):1==v&&"sunday"==n.holiday.toLowerCase()&&n.setWeekHoliday&&m.addClass("red"),n.minDate&&(m=c.checkForMinDate(m,t,parseInt(i)+1,u,l)),n.maxDate&&(m=c.checkForMaxDate(m,t,parseInt(i)+1,u,d)),n.preDates&&(m=c.checkForPreDates(m,t,parseInt(i)+1,u,f,n.preDatesClickable)),m.attr("date-value",t+"-"+c.formatDate(parseInt(i)+1)+"-"+c.formatDate(u)),m.text(u),m.click(function(a){console.log("clicked"),e(a.target).hasClass("disabled")||c.setValue(s,this,n)}),D.append(m)}a.append(D)}return a},setDays:function(a,t,i){for(var r=e("<tr/>",{"class":"col"}),n=0;n<s.length;n++){var l=e("<th/>");l.text(s[n]),r.append(l)}return t&&"saturday"==i.toLowerCase()?r.children().last().addClass("red"):t&&r.children().first().addClass("red"),a.append(r),a}},d={setDatePicker:function(a,t){var i=e("<div/>",{"class":"datePicker"});i=c.setTable(i,a,t),i.addClass("animated "+t.animation),"onClick"==t.activation&&i.css({background:t.bodyBackground}),i.insertAfter(e(a)),"onClick"==t.activation&&(e(a).parent().css({position:"relative"}),i.css({position:"absolute",marginTop:"5px",top:" 100%",zIndex:4})),i.animate({opacity:1},300)},removeDatePicker:function(a){e(a).next(".datePicker").animate({opacity:0},150,function(){e(a).next(".datePicker").remove()})}};e.fn.datePicky=function(a){var t=this,i={multipleDate:!1,format:"YYYY-MM-DD",animation:"",bodyBackground:"#fff",showCurrentDate:!0,activation:"onClick",singleCalendarMode:!1,preDatesClickable:!1,preDatesOnlyClickable:!1,showCurrentDateButton:!0,disableClickEvent:!1,setWeekHoliday:!1,holiday:"sunday"},r=e.extend(i,a);"alwaysOn"==r.activation?e(t).next(".datePicker").length<=0&&d.setDatePicker(t,r):(e(t).focus(function(){e(t).next(".datePicker").length<=0&&d.setDatePicker(t,r)}),e(document).click(function(a){var i=e(".datePicker");e(t).is(a.target)||i.is(a.target)||0!=i.find("."+a.target.classList[0]).length||0!=e(i).has(a.target).length||d.removeDatePicker(t)}))}}(jQuery);
!function(e){"use strict";var a=new Date,t=a.getFullYear(),i=a.getMonth(),s=a.getDate(),n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e,a){return new Date(a,e,0).getDate()},c={setTable:function(a,t,i){var s=e("<table/>",{"class":"datePicker-calendar"}),n=e("<div/>",{"class":"table-overlay"});return a=c.setHeading(a,t,i),a.append(s),i.disableClickEvent&&(console.log(i.disableClickEvent),s.append(n)),s=c.setDays(s),s=c.setDates(s,t,i),i.singleCalendarMode||i.showCurrentDateButton&&(a=c.setFooter(a,t,i)),a},formatDate:function(e){return e>=1&&9>=e&&(e="0"+e),e},formattedDate:function(e,a,t,i){return e+i+a+i+t},getDateFormat:function(a,t){var i,s=e(a).attr("date-value").split("/");return"DD/MM/YYYY"==t.format?(s[0]=c.formatDate(s[0]),s[1]=c.formatDate(s[1]),i=c.formattedDate(s[0],s[1],s[2],"/")):"MM/DD/YYYY"==t.format?(s[0]=c.formatDate(s[0]),s[1]=c.formatDate(s[1]),i=c.formattedDate(s[1],s[0],s[2],"/")):"DD-MM-YYYY"==t.format?(s[0]=c.formatDate(s[0]),s[1]=c.formatDate(s[1]),i=c.formattedDate(s[0],s[1],s[2],"-")):"mm-dd-yy"==t.format?(s[0]=c.formatDate(s[0]),s[1]=c.formatDate(s[1]),i=c.formattedDate(s[1],s[0],s[2],"-")):"YYYY-MM-DD"==t.format?(s[0]=c.formatDate(s[0]),s[1]=c.formatDate(s[1]),i=c.formattedDate(s[2],s[1],s[0],"-")):"D MMM, YYYY"==t.format?i=s[0]+" "+l[parseInt(s[1])-1]+", "+s[2]:"D MMMM, YYYY"==t.format?i=s[0]+" "+r[parseInt(s[1])-1]+", "+s[2]:jQuery.error("The defined date format is not supported "+t.format+" ."),i},setValue:function(a,t,i){var s=c.getDateFormat(t,i);i.multipleDate?""!==e(a).val()?e(a).val(e(a).val()+", "+s):e(a).val(s):(e(a).val(s),f.removeDatePicker(a)),i.callback?e(t).hasClass("active")&&i.callback.call(this,e(t).attr("date-value")):e(t).toggleClass("active")},setHeading:function(a,s,n){var l=e("<div/>",{"class":"calendar-heading"}),o=e("<div/>",{"class":"month-title"}),f=e("<div/>",{"class":"next",title:"Next Month"}),d=e("<div/>",{"class":"prev",title:"Previous Month"});return o.text(r[i]+" "+t),n.singleCalendarMode?l.append(o):(l.append(d),l.append(o),l.append(f),o.css({width:"calc(100% - 40px)","float":"left"})),f.click(function(e){a.empty(),i>=11?(i=0,t+=1):i+=1,a=c.setTable(a,s,n)}),d.click(function(){a.empty(),0>=i?(i=11,t-=1):i-=1,a=c.setTable(a,s,n)}),a.append(l)},setFooter:function(n,r,l){var o=e("<div/>",{"class":"footer-wrapper"});return o.text("Go to current date"),o.on("click",function(){n.empty(),t=a.getFullYear(),i=a.getMonth(),s=a.getDate(),n=c.setTable(n,r,l)}),n.append(o)},checkForMinDate:function(e,a,t,i,s){return a<s[2]?e.addClass("disabled"):a==s[2]&&(t<s[1]?e.addClass("disabled"):t==s[1]&&i<s[0]&&e.addClass("disabled")),e},checkForMaxDate:function(e,a,t,i,s){return a>s[2]?e.addClass("disabled"):a==s[2]&&(t>s[1]?e.addClass("disabled"):t==s[1]&&i>s[0]&&e.addClass("disabled")),e},checkForPreDates:function(e,a,t,i,s,n){for(var r=0;r<s.length;r++)s[r][0]==a&&s[r][1]==t&&s[r][2]==i&&(n||e.addClass("disabled"),e.addClass("active"));return e},setDates:function(a,n,r){var l,f,d=[];if(r.minDate&&(l=r.minDate.split("/")),r.maxDate&&(f=r.maxDate.split("/")),r.preDates)for(u=0;u<r.preDates.length;u++)d[u]=r.preDates[u].split("/");for(var u=1;u<=o(i+1,t);u){for(var h=e("<tr/>",{"class":"row-"+u}),g=new Date(t,i,1).getDay(),p=1;7>=p;p++,u++){var v=e("<td/>",{"class":"curr-month-date"});if(1==u){var m=o(i,t),D=i,$=t;0>=i&&(D=12,$=t-1);for(var w=g-1;w>=0;w--){var k=e("<td/>",{"class":"prev-month-date"});r.minDate&&(k=c.checkForMinDate(k,$,D,parseInt(m)-w,l)),r.maxDate&&(k=c.checkForMaxDate(k,$,D,parseInt(m)-w,f)),r.preDates&&(k=c.checkForPreDates(k,$,D,parseInt(m)-w,d,r.preDatesClickable)),k.attr("date-value",parseInt(m)-w+"/"+D+"/"+$),k.text(m-w),h.append(k),p++,k.on("click",function(a){e(a.target).hasClass("disabled")||c.setValue(n,this,r)})}}else if(u>o(i+1,t)){var C=1,b=i+2,M=t;i>=11&&(b=1,M=t+1);for(var w=h.children().length;7>w;w++,C++){var y=e("<td/>",{"class":"next-month-date"});r.minDate&&(y=c.checkForMinDate(y,M,b,C,l)),r.maxDate&&(y=c.checkForMaxDate(y,M,b,C,f)),r.preDates&&(y=c.checkForPreDates(y,M,b,C,d,r.preDatesClickable)),y.attr("date-value",C+"/"+b+"/"+M),y.text(C),h.append(y),p++,y.on("click",function(a){e(a.target).hasClass("disabled")||c.setValue(n,this,r)})}break}if(r.showCurrentDate&&u==s){var x=new Date;i==x.getMonth()&&t==x.getFullYear()&&v.addClass("today")}7==p&&v.addClass("red"),r.minDate&&(v=c.checkForMinDate(v,t,parseInt(i)+1,u,l)),r.maxDate&&(v=c.checkForMaxDate(v,t,parseInt(i)+1,u,f)),r.preDates&&(v=c.checkForPreDates(v,t,parseInt(i)+1,u,d,r.preDatesClickable)),v.attr("date-value",u+"/"+(parseInt(i)+1)+"/"+t),v.text(u),v.click(function(a){e(a.target).hasClass("disabled")||c.setValue(n,this,r)}),h.append(v)}a.append(h)}return a},setDays:function(a){for(var t=e("<tr/>",{"class":"col"}),i=0;i<n.length;i++)if(6==i){var s=e("<th/>",{"class":"red"});s.text(n[i]),t.append(s)}else{var s=e("<th/>");s.text(n[i]),t.append(s)}return a.append(t),a}},f={setDatePicker:function(a,t){var i=e("<div/>",{"class":"datePicker"});i=c.setTable(i,a,t),i.addClass("animated "+t.animation),i.css({background:t.bodyBackground}),i.insertAfter(e(a)),"onClick"==t.activation&&(e(a).parent().css({position:"relative"}),i.css({position:"absolute",marginTop:"5px",top:" 100%"})),i.animate({opacity:1},300)},removeDatePicker:function(a){e(a).next(".datePicker").animate({opacity:0},150,function(){e(a).next(".datePicker").remove()})}};e.fn.datePicky=function(a){var t=this,i={multipleDate:!1,format:"DD/MM/YYYY",animation:"",bodyBackground:"#fff",showCurrentDate:!0,activation:"onClick",singleCalendarMode:!1,preDatesClickable:!1,showCurrentDateButton:!0,disableClickEvent:!1},s=e.extend(i,a);console.log(s),"always-on"==s.activation?e(t).next(".datePicker").length<=0&&f.setDatePicker(t,s):(e(t).focus(function(){e(t).next(".datePicker").length<=0&&f.setDatePicker(t,s)}),e(document).click(function(a){var i=e(".datePicker");e(t).is(a.target)||i.is(a.target)||0!=i.find("."+a.target.classList[0]).length||0!=e(i).has(a.target).length||f.removeDatePicker(t)}))}}(jQuery);